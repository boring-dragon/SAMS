import{E as k,j as v,o as s,c as n,a,u as y,H as b,w as d,F as u,b as e,k as C,q as S,G as j,p as h,t as l,h as M,f as p,e as Q}from"./app.c2c10325.js";import{_ as V}from"./Authenticated.2cf1f63d.js";import{L as A}from"./Loader.aaf4f8b4.js";import{_ as B}from"./DialogModal.0d680bb8.js";import"./FlashMessages.e33c5b43.js";import"./plugin-vue_export-helper.21dcd24c.js";const H=Q("Attendance"),F={class:"py-12"},$=e("h3",{class:"text-3xl text-center font-bold text-gray-700"},"Generate Attendance Code",-1),G={class:"p-8 bg-white rounded-lg shadow-lg lg:p-12 lg:col-span-3 mt-8"},N=["onSubmit"],O=e("label",{class:"block text-sm font-medium text-gray-700",for:"module"},"Select Module",-1),L=["value"],q={class:"mt-4"},D={class:"inline-flex items-center justify-center w-full px-4 py-2 text-white bg-black rounded-lg sm:w-auto",type:"submit"},E=e("span",{class:"font-medium mr-3"},"Generate Attendance",-1),R=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M14 5l7 7m0 0l-7 7m7-7H3","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),I={key:0,class:"flex flex-col bg-white shadow-xl rounded-lg mt-8"},P={class:"-m-1.5 overflow-x-auto"},T={class:"p-1.5 min-w-full inline-block align-middle"},U={class:"overflow-hidden"},z={class:"min-w-full divide-y divide-gray-200"},J=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",scope:"col"},"Module"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",scope:"col"},"Attendance Code"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",scope:"col"},"Generated At")])],-1),K={class:"divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-800"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-800"},Z={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-5 flex items-center"},ee=["onClick"],te=e("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24"},[e("rect",{height:"12.5",rx:"1",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",width:"12.5",x:"5.75",y:"5.75"})],-1),oe=e("span",null,"Stop Attendance",-1),se=[te,oe],ne=["onClick"],re=e("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7.25 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V7.25",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}),e("path",{d:"M16.75 4.75H17.25C18.3546 4.75 19.25 5.64543 19.25 6.75V7.25",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}),e("path",{d:"M7.25 19.25H6.75C5.64543 19.25 4.75 18.3546 4.75 17.25V16.75",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}),e("path",{d:"M16.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25V16.75",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}),e("path",{d:"M7.75 9V15",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}),e("path",{d:"M12 9V15",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}),e("path",{d:"M16.25 9V15",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"})],-1),ie=e("span",null,"Show QR Code",-1),de=[re,ie],le=e("h2",{class:"text-md font-semibold text-gray-600 text-center"},"Qr code",-1),ce={class:"flex flex-col items-center justify-center"},ae=["src"],ue=e("p",{class:"text-center text-md text-gray-500"},"Please scan the QR code above to copy the attendance code",-1),fe={__name:"Index",props:{modules:Object,errors:Object,generated_attendances:Object},setup(_){const c=_,t=k({sending:!1,showQrCode:!1,currentQrCodeShowing:null,form:v({module_id:null},{resetOnSuccess:!1})});function m(){t.form.post(route("admin.attendances.generate"),{onStart:()=>t.sending=!0,onFinish:()=>t.sending=!1,preserveScroll:!0})}function x(r){t.form.module_id=r.id,t.form.post(route("admin.attendances.stop"),{onStart:()=>t.sending=!0,onFinish:()=>t.sending=!1,preserveScroll:!0})}function g(r){t.showQrCode=!0,t.currentQrCodeShowing=r}function f(){t.showQrCode=!1,t.currentQrCodeShowing=null}return(r,i)=>(s(),n(u,null,[a(y(b),{title:"Attendance"}),a(V,null,{header:d(()=>[H]),default:d(()=>[e("div",F,[$,e("div",G,[e("form",{onSubmit:C(m,["prevent"]),class:"space-y-4"},[e("div",null,[O,S(e("select",{class:"py-3 px-4 pr-9 block w-full border-gray-200 rounded-md text-sm focus:border-indigo-500 focus:ring-indigo-500 mt-2",placeholder:"Select Module","onUpdate:modelValue":i[0]||(i[0]=o=>t.form.module_id=o)},[(s(!0),n(u,null,h(c.modules,o=>(s(),n("option",{key:o.id,value:o.id},l(o.name),9,L))),128))],512),[[j,t.form.module_id]])]),e("div",q,[e("button",D,[E,t.sending?(s(),M(A,{key:0})):p("",!0),R])])],40,N)]),e("div",null,[c.generated_attendances.length>0?(s(),n("div",I,[e("div",P,[e("div",T,[e("div",U,[e("table",z,[J,e("tbody",K,[(s(!0),n(u,null,h(c.generated_attendances,o=>(s(),n("tr",{key:o.id},[e("td",W,l(o.name),1),e("td",X,l(o.attendance_code),1),e("td",Y,l(o.attendance_generated_at),1),e("td",Z,[e("button",{onClick:w=>x(o),class:"inline-flex px-6 py-3 text-sm font-medium text-indigo-600 border border-indigo-600 rounded hover:bg-indigo-600 hover:text-white active:bg-indigo-500 focus:outline-none focus:ring items-center"},se,8,ee),e("button",{onClick:w=>g(o.qr_code),class:"inline-flex items-center px-6 py-3 text-sm font-medium text-indigo-600 border border-indigo-600 rounded hover:bg-indigo-600 hover:text-white active:bg-indigo-500 focus:outline-none focus:ring"},de,8,ne)])]))),128))])])])])])])):p("",!0)]),a(B,{show:t.showQrCode,onClose:i[1]||(i[1]=o=>f())},{title:d(()=>[le]),content:d(()=>[e("div",ce,[e("img",{src:t.currentQrCodeShowing},null,8,ae)]),ue]),_:1},8,["show"])])]),_:1})],64))}};export{fe as default};
